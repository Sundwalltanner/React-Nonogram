(this["webpackJsonpReact-Nonogram"]=this["webpackJsonpReact-Nonogram"]||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s.n(n),a=s(7),o=s.n(a),i=s(1),u=s(2),c=s(4),l=s(3),h=s(5),m=5,p=5,d={EMPTY:1,FILLED:2,MARKED:3,properties:{1:{name:"empty"},2:{name:"filled"},3:{name:"marked"}}};s(13);function v(e){for(var t=[],s=0;s<e.values.length;s++){for(var n=[],a=0;a<e.values[s].length;a++)n.push(r.a.createElement("div",{className:"hint"},e.values[s][a]));t.push(r.a.createElement("div",{className:"hint-"+e.type},n))}return r.a.createElement("div",{className:e.area+"-hints"},t)}function f(e){var t="undefined"===typeof e.value?1:e.value,s=d.properties[t].name;return r.a.createElement("div",{className:"square square-"+s,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter},r.a.createElement("span",{className:"material-icons"},"cancel"))}var E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement(f,{value:this.props.squares[e],onMouseDown:function(s){return t.props.onMouseDown(s,e)},onMouseEnter:function(){return t.props.onMouseEnter(e)}})}},{key:"render",value:function(){for(var e=[],t=0,s=0;s<this.props.dimensions.rows;s++){for(var n=[],a=0;a<this.props.dimensions.cols;a++)n.push(this.renderSquare(t++));e.push(n)}for(var o=[],i=0;i<this.props.dimensions.rows;i++)o.push(r.a.createElement("div",{className:"board-row"},e[i]));return r.a.createElement("div",{className:"game-board"},o)}}]),t}(r.a.Component),M=function(e){function t(e){var s;Object(i.a)(this,t),s=Object(c.a)(this,Object(l.a)(t).call(this,e));var n=m*p;return s.state={dimensions:{rows:m,cols:p},current:Array(n).fill(d.EMPTY),history:[{squares:Array(n).fill(d.EMPTY)}],stepNumber:0,currentHints:{rows:[],cols:[]},goalHints:{rows:[],cols:[]},lMouseDown:!1,rMouseDown:!1,initialSquare:d.EMPTY,currentAction:d.EMPTY,changed:!1,seconds:0,timer:"00:00:00"},s}return Object(h.a)(t,e),Object(u.a)(t,[{key:"tick",value:function(){var e=this;this.setState((function(t){return{seconds:t.seconds+1,timer:new Date(1e3*(e.state.seconds+1)).toISOString().substr(11,8)}}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),1e3)}},{key:"getSquareIndex",value:function(e,t){return t+this.state.dimensions.cols*e}},{key:"appendHistory",value:function(){if(this.state.changed){var e=this.state.history.slice(0,this.state.stepNumber+1),t=this.state.current,s=this.getHintNumbers();t!==e[e.length-1].squares&&this.setState({history:e.concat([{squares:t}]),stepNumber:e.length,currentHints:s,changed:!1}),this.setState({lMouseDown:!1,rMouseDown:!1,initialSquare:d.EMPTY,currentAction:d.EMPTY}),console.log(this.state.currentHints)}}},{key:"squareClick",value:function(e,t){var s=this.state.current.slice(),n=this.state.lMouseDown,r=this.state.rMouseDown,a=s[t],o=this.state.currentAction,i=this.state.changed;if(0===e.button)"mousedown"===e.type&&(n=!0,o=a===d.EMPTY?d.FILLED:d.EMPTY,s[t]=o,i=!0);else{if(2!==e.button)return;"mousedown"===e.type&&(r=!0,o=a===d.EMPTY?d.MARKED:d.EMPTY,s[t]=o,i=!0)}this.setState({current:s,lMouseDown:n,rMouseDown:r,initialSquare:a,currentAction:o,changed:i})}},{key:"squareHover",value:function(e){var t=this.state.lMouseDown,s=this.state.rMouseDown,n=this.state.changed;if(t||s){var r=this.state.current.slice(),a=this.state.initialSquare,o=this.state.currentAction;a===r[e]&&(r[e]=o,n=!0,this.setState({current:r,changed:n}))}}},{key:"getHintNumbers",value:function(){for(var e=this.state.current,t=this.state.dimensions,s={rows:[],cols:[]},n=0;n<t.rows;n++){for(var r=[],a=0,o=0;o<t.cols;o++)e[this.getSquareIndex(n,o)]===d.FILLED?a++:a&&(r.push(a),a=0);!a&&r.length||r.push(a),s.rows.push(r)}for(var i=0;i<t.cols;i++){for(var u=[],c=0,l=0;l<t.rows;l++)e[this.getSquareIndex(l,i)]===d.FILLED?c++:c&&(u.push(c),c=0);!c&&u.length||u.push(c),s.cols.push(u)}return s}},{key:"jumpTo",value:function(e){e<0||e>=this.state.history.length||this.setState({current:this.state.history[e].squares,stepNumber:e})}},{key:"undoAction",value:function(){var e=this.state.stepNumber;e&&this.setState({current:this.state.history[e-1].squares,stepNumber:e-1})}},{key:"redoAction",value:function(){var e=this.state.stepNumber;e!==this.state.history.length-1&&this.setState({current:this.state.history[e+1].squares,stepNumber:e+1})}},{key:"render",value:function(){var e=this,t=this.state.current;return r.a.createElement("div",{className:"game",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(){return e.appendHistory()}},r.a.createElement("div",{className:"left-panel"},r.a.createElement("div",{className:"game-info"},r.a.createElement("div",null,this.state.timer))),r.a.createElement("div",{className:"right-panel"},r.a.createElement("div",{className:"upper-board"},r.a.createElement(v,{values:this.state.currentHints.cols,area:"upper",type:"col"})),r.a.createElement("div",{className:"lower-board"},r.a.createElement(v,{values:this.state.currentHints.rows,area:"left",type:"row"}),r.a.createElement(E,{squares:t,dimensions:this.state.dimensions,onMouseDown:function(t,s){return e.squareClick(t,s)},onMouseEnter:function(t){return e.squareHover(t)}})),r.a.createElement("div",{className:"undo-redo"},r.a.createElement("span",{className:"material-icons",onClick:function(){return e.undoAction()}},"undo"),r.a.createElement("span",{className:"material-icons",onClick:function(){return e.redoAction()}},"redo"))))}}]),t}(r.a.Component);s(14);o.a.render(r.a.createElement(M,null),document.getElementById("app"))},8:function(e,t,s){e.exports=s(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.425caf90.chunk.js.map