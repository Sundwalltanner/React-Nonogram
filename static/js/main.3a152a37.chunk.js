(this["webpackJsonpReact-Nonogram"]=this["webpackJsonpReact-Nonogram"]||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(7),o=s.n(r),i=s(1),u=s(2),c=s(4),l=s(3),h=s(5),m=5,d=5,p={EMPTY:1,FILLED:2,MARKED:3,properties:{1:{name:"empty"},2:{name:"filled"},3:{name:"marked"}}},v=[[5,5],[10,5],[10,10],[15,10],[15,15],[20,15],[20,20],[25,20],[25,25],[30,25],[30,30]];s(13);function f(){for(var e=[],t=0;t<v.length;t++)e.push(a.a.createElement("option",null,v[t][0]+"x"+v[t][1]));return a.a.createElement("select",{id:"dimensions-select"},e)}function g(e){for(var t=[],s=0;s<e.values.length;s++){for(var n=[],r=0;r<e.values[s].length;r++)n.push(a.a.createElement("div",{className:"hint"},e.values[s][r]));t.push(a.a.createElement("div",{className:"hint-"+e.type},n))}return a.a.createElement("div",{className:e.area+"-hints"},t)}function E(e){var t="undefined"===typeof e.value?1:e.value,s=p.properties[t].name;return a.a.createElement("div",{className:"square square-"+s,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter},a.a.createElement("span",{className:"material-icons"},"cancel"))}var w=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"renderSquare",value:function(e){var t=this;return a.a.createElement(E,{value:this.props.squares[e],onMouseDown:function(s){return t.props.onMouseDown(s,e)},onMouseEnter:function(){return t.props.onMouseEnter(e)}})}},{key:"render",value:function(){for(var e=[],t=0,s=0;s<this.props.dimensions.rows;s++){for(var n=[],r=0;r<this.props.dimensions.cols;r++)n.push(this.renderSquare(t++));e.push(n)}for(var o=[],i=0;i<this.props.dimensions.rows;i++)o.push(a.a.createElement("div",{className:"board-row"},e[i]));return a.a.createElement("div",{className:"game-board"},o)}}]),t}(a.a.Component),M=function(e){function t(e){var s;Object(i.a)(this,t),s=Object(c.a)(this,Object(l.a)(t).call(this,e));var n=m*d;return s.state={dimensions:{rows:m,cols:d},current:Array(n).fill(p.EMPTY),history:[{squares:Array(n).fill(p.EMPTY)}],stepNumber:0,goalHints:{rows:[],cols:[]},lMouseDown:!1,rMouseDown:!1,initialSquare:p.EMPTY,currentAction:p.EMPTY,changed:!1,seconds:0,timer:"00:00:00"},s}return Object(h.a)(t,e),Object(u.a)(t,[{key:"tick",value:function(){var e=this;this.setState((function(t){return{seconds:t.seconds+1,timer:new Date(1e3*(e.state.seconds+1)).toISOString().substr(11,8)}}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),1e3),this.generateWinState()}},{key:"componentDidUpdate",value:function(e,t){this.state.goalHints.rows.length||this.generateWinState()}},{key:"generateWinState",value:function(){for(var e=this.state.dimensions.rows*this.state.dimensions.cols,t=[],s=0;s<e;s++)t.push(Math.random()<.5?p.EMPTY:p.FILLED);this.setState({goalHints:this.getHintNumbers(t)})}},{key:"winCheck",value:function(){for(var e=this.getHintNumbers(this.state.current),t=0;t<this.state.goalHints.rows.length;t++){if(this.state.goalHints.rows[t].length!=e.rows[t].length)return!1;for(var s=0;s<this.state.goalHints.rows[t].length;s++)if(this.state.goalHints.rows[t][s]!==e.rows[t][s])return!1}for(var n=0;n<this.state.goalHints.cols.length;n++){if(this.state.goalHints.cols[n].length!=e.cols[n].length)return!1;for(var a=0;a<this.state.goalHints.cols[n].length;a++)if(this.state.goalHints.cols[n][a]!==e.cols[n][a])return!1}return!0}},{key:"getSquareIndex",value:function(e,t){return t+this.state.dimensions.cols*e}},{key:"appendHistory",value:function(){if(this.state.changed){var e=this.state.history.slice(0,this.state.stepNumber+1),t=this.state.current;t!==e[e.length-1].squares&&this.setState({history:e.concat([{squares:t}]),stepNumber:e.length,changed:!1}),this.setState({lMouseDown:!1,rMouseDown:!1,initialSquare:p.EMPTY,currentAction:p.EMPTY})}}},{key:"squareClick",value:function(e,t){var s=this.state.current.slice(),n=this.state.lMouseDown,a=this.state.rMouseDown,r=s[t],o=this.state.currentAction,i=this.state.changed;if(0===e.button)"mousedown"===e.type&&(n=!0,o=r===p.EMPTY?p.FILLED:p.EMPTY,s[t]=o,i=!0);else{if(2!==e.button)return;"mousedown"===e.type&&(a=!0,o=r===p.EMPTY?p.MARKED:p.EMPTY,s[t]=o,i=!0)}this.setState({current:s,lMouseDown:n,rMouseDown:a,initialSquare:r,currentAction:o,changed:i})}},{key:"squareHover",value:function(e){var t=this.state.lMouseDown,s=this.state.rMouseDown,n=this.state.changed;if(t||s){var a=this.state.current.slice(),r=this.state.initialSquare,o=this.state.currentAction;r===a[e]&&(a[e]=o,n=!0,this.setState({current:a,changed:n}))}}},{key:"getHintNumbers",value:function(e){for(var t=this.state.dimensions,s={rows:[],cols:[]},n=0;n<t.rows;n++){for(var a=[],r=0,o=0;o<t.cols;o++)e[this.getSquareIndex(n,o)]===p.FILLED?r++:r&&(a.push(r),r=0);!r&&a.length||a.push(r),s.rows.push(a)}for(var i=0;i<t.cols;i++){for(var u=[],c=0,l=0;l<t.rows;l++)e[this.getSquareIndex(l,i)]===p.FILLED?c++:c&&(u.push(c),c=0);!c&&u.length||u.push(c),s.cols.push(u)}return s}},{key:"jumpTo",value:function(e){e<0||e>=this.state.history.length||this.setState({current:this.state.history[e].squares,stepNumber:e})}},{key:"undoAction",value:function(){var e=this.state.stepNumber;e&&this.setState({current:this.state.history[e-1].squares,stepNumber:e-1})}},{key:"redoAction",value:function(){var e=this.state.stepNumber;e!==this.state.history.length-1&&this.setState({current:this.state.history[e+1].squares,stepNumber:e+1})}},{key:"restart",value:function(){var e=document.getElementById("dimensions-select").selectedIndex,t={rows:v[e][1],cols:v[e][0]},s=t.rows*t.cols;this.setState({dimensions:t,current:Array(s).fill(p.EMPTY),history:[{squares:Array(s).fill(p.EMPTY)}],stepNumber:0,goalHints:{rows:[],cols:[]},lMouseDown:!1,rMouseDown:!1,initialSquare:p.EMPTY,currentAction:p.EMPTY,changed:!1,seconds:0,timer:"00:00:00"})}},{key:"render",value:function(){var e=this,t=this.state.current;return a.a.createElement("div",{className:"game",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(){return e.appendHistory()}},a.a.createElement("div",{className:"left-panel"},a.a.createElement("div",{className:"game-info"},a.a.createElement("div",null,this.state.timer),a.a.createElement("div",null,this.winCheck()?"You won!":""))),a.a.createElement("div",{className:"right-panel"},a.a.createElement("div",{className:"upper-board"},a.a.createElement(g,{values:this.state.goalHints.cols,area:"upper",type:"col"})),a.a.createElement("div",{className:"lower-board"},a.a.createElement(g,{values:this.state.goalHints.rows,area:"left",type:"row"}),a.a.createElement(w,{squares:t,dimensions:this.state.dimensions,onMouseDown:function(t,s){return e.squareClick(t,s)},onMouseEnter:function(t){return e.squareHover(t)}})),a.a.createElement("div",{className:"undo-redo"},a.a.createElement("span",{className:"material-icons",onClick:function(){return e.undoAction()}},"undo"),a.a.createElement("span",{className:"material-icons",onClick:function(){return e.redoAction()}},"redo"),a.a.createElement("span",{className:"material-icons",onClick:function(){return e.restart()}},"replay"),a.a.createElement(f,null))))}}]),t}(a.a.Component);s(14);o.a.render(a.a.createElement(M,null),document.getElementById("app"))},8:function(e,t,s){e.exports=s(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.3a152a37.chunk.js.map