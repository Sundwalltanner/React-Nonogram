(this["webpackJsonpReact-Nonogram"]=this["webpackJsonpReact-Nonogram"]||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s.n(n),a=s(7),i=s.n(a),o=s(2),u=s(4),c=s(3),l=s(5),h=s(1),m=5,d=5,f={EMPTY:1,FILLED:2,MARKED:3,properties:{1:{name:"empty"},2:{name:"filled"},3:{name:"marked"}}},p=[[5,5],[10,5],[10,10],[15,10],[15,15],[20,15],[20,20],[25,20],[25,25],[30,25],[30,30]],v=(s(13),function e(t,s){Object(h.a)(this,e),this.rows=t,this.cols=s});function g(){for(var e=[],t=0;t<p.length;t++)e.push(r.a.createElement("option",null,p[t][0]+"x"+p[t][1]));return r.a.createElement("select",{id:"dimensions-select"},e)}function E(e){for(var t=[],s=0;s<e.goalHints.length;s++){for(var n=[],a=0,i=0;i<e.goalHints[s].length;i++)"undefined"!==typeof e.currentHints[s][a]&&e.currentHints[s][a]===e.goalHints[s][i]?(a++,n.push(r.a.createElement("div",{className:"hint crossout"},e.goalHints[s][i]))):n.push(r.a.createElement("div",{className:"hint"},e.goalHints[s][i]));t.push(r.a.createElement("div",{className:"hint-"+e.type},n))}return r.a.createElement("div",{className:e.area+"-hints"},t)}function w(e){var t="undefined"===typeof e.value?1:e.value,s=f.properties[t].name;return r.a.createElement("div",{className:"square square-"+s,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter},r.a.createElement("span",{className:"material-icons"},"cancel"))}var y=function(e){function t(){return Object(h.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement(w,{value:this.props.squares[e],onMouseDown:function(s){return t.props.onMouseDown(s,e)},onMouseEnter:function(){return t.props.onMouseEnter(e)}})}},{key:"render",value:function(){for(var e=[],t=0,s=0;s<this.props.dimensions.rows;s++){for(var n=[],a=0;a<this.props.dimensions.cols;a++)n.push(this.renderSquare(t++));e.push(n)}for(var i=[],o=0;o<this.props.dimensions.rows;o++)i.push(r.a.createElement("div",{className:"board-row"},e[o]));return r.a.createElement("div",{className:"game-board"},i)}}]),t}(r.a.Component),M=function(e){function t(e){var s;Object(h.a)(this,t),s=Object(u.a)(this,Object(c.a)(t).call(this,e));var n=m*d;return s.state={dimensions:{rows:m,cols:d},current:Array(n).fill(f.EMPTY),history:[{squares:Array(n).fill(f.EMPTY)}],stepNumber:0,currentHints:new v(Array(m).fill([0]),Array(d).fill([0])),goalHints:new v([],[]),lMouseDown:!1,rMouseDown:!1,initialSquare:f.EMPTY,currentAction:f.EMPTY,changed:!1,seconds:0,timer:"00:00:00"},s}return Object(l.a)(t,e),Object(o.a)(t,[{key:"tick",value:function(){var e=this;this.setState((function(t){return{seconds:t.seconds+1,timer:new Date(1e3*(e.state.seconds+1)).toISOString().substr(11,8)}}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.tick()}),1e3),this.generateWinState()}},{key:"componentDidUpdate",value:function(e,t){this.state.goalHints.rows.length||this.generateWinState()}},{key:"generateWinState",value:function(){for(var e=this.state.dimensions.rows*this.state.dimensions.cols,t=[],s=0;s<e;s++)t.push(Math.random()<.5?f.EMPTY:f.FILLED);this.setState({goalHints:this.getHintNumbers(t)})}},{key:"winCheck",value:function(){if(!this.state.currentHints.rows.length)return!1;for(var e=0;e<this.state.goalHints.rows.length;e++){if(this.state.goalHints.rows[e].length!==this.state.currentHints.rows[e].length)return!1;for(var t=0;t<this.state.goalHints.rows[e].length;t++)if(this.state.goalHints.rows[e][t]!==this.state.currentHints.rows[e][t])return!1}for(var s=0;s<this.state.goalHints.cols.length;s++){if(this.state.goalHints.cols[s].length!==this.state.currentHints.cols[s].length)return!1;for(var n=0;n<this.state.goalHints.cols[s].length;n++)if(this.state.goalHints.cols[s][n]!==this.state.currentHints.cols[s][n])return!1}return!0}},{key:"getSquareIndex",value:function(e,t){return t+this.state.dimensions.cols*e}},{key:"appendHistory",value:function(){if(this.state.changed){var e=this.state.history.slice(0,this.state.stepNumber+1),t=this.state.current;t!==e[e.length-1].squares&&this.setState({history:e.concat([{squares:t}]),stepNumber:e.length,changed:!1}),this.setState({currentHints:this.getHintNumbers(this.state.current),lMouseDown:!1,rMouseDown:!1,initialSquare:f.EMPTY,currentAction:f.EMPTY})}}},{key:"squareClick",value:function(e,t){var s=this.state.current.slice(),n=this.state.lMouseDown,r=this.state.rMouseDown,a=s[t],i=this.state.currentAction,o=this.state.changed;if(0===e.button)"mousedown"===e.type&&(n=!0,i=a===f.EMPTY?f.FILLED:f.EMPTY,s[t]=i,o=!0);else{if(2!==e.button)return;"mousedown"===e.type&&(r=!0,i=a===f.EMPTY?f.MARKED:f.EMPTY,s[t]=i,o=!0)}this.setState({current:s,lMouseDown:n,rMouseDown:r,initialSquare:a,currentAction:i,changed:o})}},{key:"squareHover",value:function(e){var t=this.state.lMouseDown,s=this.state.rMouseDown,n=this.state.changed;if(t||s){var r=this.state.current.slice(),a=this.state.initialSquare,i=this.state.currentAction;a===r[e]&&(r[e]=i,n=!0,this.setState({current:r,changed:n}))}}},{key:"getHintNumbers",value:function(e){for(var t=this.state.dimensions,s=new v([],[]),n=0;n<t.rows;n++){for(var r=[],a=0,i=0;i<t.cols;i++)e[this.getSquareIndex(n,i)]===f.FILLED?a++:a&&(r.push(a),a=0);!a&&r.length||r.push(a),s.rows.push(r)}for(var o=0;o<t.cols;o++){for(var u=[],c=0,l=0;l<t.rows;l++)e[this.getSquareIndex(l,o)]===f.FILLED?c++:c&&(u.push(c),c=0);!c&&u.length||u.push(c),s.cols.push(u)}return s}},{key:"jumpTo",value:function(e){e<0||e>=this.state.history.length||this.setState({current:this.state.history[e].squares,stepNumber:e})}},{key:"undoAction",value:function(){var e=this.state.stepNumber;e&&this.setState({current:this.state.history[e-1].squares,stepNumber:e-1})}},{key:"redoAction",value:function(){var e=this.state.stepNumber;e!==this.state.history.length-1&&this.setState({current:this.state.history[e+1].squares,stepNumber:e+1})}},{key:"restart",value:function(){var e=document.getElementById("dimensions-select").selectedIndex,t={rows:p[e][1],cols:p[e][0]},s=t.rows*t.cols;this.setState({dimensions:t,current:Array(s).fill(f.EMPTY),history:[{squares:Array(s).fill(f.EMPTY)}],stepNumber:0,currentHints:new v(Array(t.rows).fill([0]),Array(t.cols).fill([0])),goalHints:new v([],[]),lMouseDown:!1,rMouseDown:!1,initialSquare:f.EMPTY,currentAction:f.EMPTY,changed:!1,seconds:0,timer:"00:00:00"})}},{key:"render",value:function(){var e=this,t=this.state.current;return r.a.createElement("div",{className:"game",onContextMenu:function(e){return e.preventDefault()},onMouseUp:function(){return e.appendHistory()}},r.a.createElement("div",{className:"left-panel"},r.a.createElement("div",{className:"game-info"},r.a.createElement("div",null,this.state.timer),r.a.createElement("div",null,this.winCheck()?"You won!":""))),r.a.createElement("div",{className:"right-panel"},r.a.createElement("div",{className:"upper-board"},r.a.createElement(E,{currentHints:this.state.currentHints.cols,goalHints:this.state.goalHints.cols,area:"upper",type:"col"})),r.a.createElement("div",{className:"lower-board"},r.a.createElement(E,{currentHints:this.state.currentHints.rows,goalHints:this.state.goalHints.rows,area:"left",type:"row"}),r.a.createElement(y,{squares:t,dimensions:this.state.dimensions,onMouseDown:function(t,s){return e.squareClick(t,s)},onMouseEnter:function(t){return e.squareHover(t)}})),r.a.createElement("div",{className:"undo-redo"},r.a.createElement("span",{className:"material-icons",onClick:function(){return e.undoAction()}},"undo"),r.a.createElement("span",{className:"material-icons",onClick:function(){return e.redoAction()}},"redo"),r.a.createElement("span",{className:"material-icons",onClick:function(){return e.restart()}},"replay"),r.a.createElement(g,null))))}}]),t}(r.a.Component);s(14);i.a.render(r.a.createElement(M,null),document.getElementById("app"))},8:function(e,t,s){e.exports=s(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.60837463.chunk.js.map